influxdb:
  image: influxdb:latest
  container_name: influxdb
  ports:
    - "8083:8083"
    - "8086:8086"
    - "8090:8090"
    - "2003:2003"
  volumes:
    # Data persistency
    # sudo mkdir -p /srv/docker/influxdb/data
    - /srv/docker/influxdb/data:/var/lib/influxdb
  environment:                
    - INFLUXDB_GRAPHITE_ENABLED=true
    - GRAPHITE_BIND_ADDRESS=2003
    - GRAPHITE_DB=jmeter
    - GRAPHITE_BINDING=2015
    - GRAPHITE_PROTOCOL=tcp
    - GRAPHITE_BATCH_SIZE=5000
    - GRAPHITE_BATCH_PENDING=10     
    - GRAPHITE_BATCH_TIMEOUT=1    
    - GRAPHITE_CONSISTENCY_LEVEL=one
    - GRAPHITE_SEPARATOR=.
    - GRAPHITE_UDP_READ_BUFFER=0    
grafana:
  image: grafana/grafana:latest
  container_name: grafana
  ports:
    - "3001:3000"
  user: "0"
  links:
    - influxdb
  volumes:
    # Data persistency
    # sudo mkdir -p /srv/docker/grafana/data; chown 472:472 /srv/docker/grafana/data
    - /srv/docker/grafana/data:/var/lib/grafana
